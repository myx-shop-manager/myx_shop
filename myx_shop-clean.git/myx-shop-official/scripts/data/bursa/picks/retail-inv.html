<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BursaæŠ•èµ„è®¡ç®—å™¨ - æ‰‹æœºç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #4CAF50;
            --secondary-dark: #388E3C;
            --warning: #FF9800;
            --danger: #F44336;
            --success: #4CAF50;
            --light: #F5F7FA;
            --dark: #333333;
            --gray: #666666;
            --light-gray: #EEEEEE;
            --white: #FFFFFF;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --radius: 12px;
            --radius-sm: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            line-height: 1.5;
            min-height: 100vh;
            padding: 0;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: var(--white);
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .app-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .app-title i {
            font-size: 20px;
        }
        
        .app-subtitle {
            font-size: 13px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        /* æ ‡ç­¾é¡µåˆ‡æ¢ */
        .tab-bar {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--light-gray);
            position: sticky;
            top: 90px;
            z-index: 99;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            font-weight: 600;
        }
        
        .tab i {
            margin-right: 5px;
            font-size: 16px;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            padding: 15px;
            min-height: calc(100vh - 180px);
            overflow-y: auto;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--light-gray);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-title i {
            font-size: 18px;
        }
        
        /* æ—¥æœŸé€‰æ‹©å™¨ */
        .date-picker {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 12px;
            background: var(--light);
            border-radius: var(--radius-sm);
        }
        
        .date-picker label {
            font-weight: 500;
            color: var(--gray);
            white-space: nowrap;
        }
        
        #dateSelect {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            background: white;
            font-size: 14px;
        }
        
        /* è‚¡ç¥¨åˆ—è¡¨ */
        .stocks-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .stock-item {
            padding: 15px;
            margin-bottom: 10px;
            background: var(--light);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
            position: relative;
            transition: all 0.3s;
        }
        
        .stock-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .stock-item.selected {
            background: #E8F5E9;
            border-left-color: var(--success);
        }
        
        .stock-rank {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .stock-basic {
            margin-bottom: 10px;
        }
        
        .stock-code {
            font-size: 16px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stock-name {
            font-size: 13px;
            color: var(--gray);
            margin-top: 2px;
        }
        
        .stock-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 8px 0;
        }
        
        .tag {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .tag.buy {
            background: #E8F5E9;
            color: var(--success);
        }
        
        .tag.warrant {
            background: #E3F2FD;
            color: var(--primary);
        }
        
        .tag.stock {
            background: #FFF3E0;
            color: var(--warning);
        }
        
        .stock-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        
        .price {
            font-size: 18px;
            font-weight: bold;
            color: var(--success);
        }
        
        .price-change {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .price-change.positive {
            background: #E8F5E9;
            color: var(--success);
        }
        
        .price-change.negative {
            background: #FFEBEE;
            color: var(--danger);
        }
        
        .select-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .select-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .select-btn.selected {
            background: var(--success);
        }
        
        .select-btn i {
            font-size: 14px;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--dark);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .form-label i {
            color: var(--primary);
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .input-group {
            display: flex;
            gap: 10px;
        }
        
        .input-group .form-input {
            flex: 1;
        }
        
        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 14px;
        }
        
        /* è´¹ç”¨è®¾ç½® */
        .fee-settings {
            background: var(--light);
            padding: 15px;
            border-radius: var(--radius-sm);
            margin: 15px 0;
        }
        
        .fee-row {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .fee-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid #ddd;
        }
        
        /* ç»“æœåŒºåŸŸ */
        .result-card {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
            margin-top: 20px;
        }
        
        .result-main {
            font-size: 32px;
            font-weight: bold;
            color: var(--success);
            margin: 10px 0;
        }
        
        .result-positive {
            color: var(--success);
        }
        
        .result-negative {
            color: var(--danger);
        }
        
        .result-sub {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .result-details {
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            margin-top: 15px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
            font-size: 14px;
        }
        
        .detail-row:last-child {
            border-bottom: none;
            font-weight: bold;
            padding-top: 15px;
            border-top: 2px solid var(--light-gray);
        }
        
        /* åŠ è½½çŠ¶æ€ */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }
        
        .loading i {
            font-size: 36px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .error {
            background: #FFEBEE;
            color: var(--danger);
            padding: 15px;
            border-radius: var(--radius-sm);
            margin-bottom: 15px;
            border-left: 4px solid var(--danger);
        }
        
        /* åº•éƒ¨å¯¼èˆª */
        .app-footer {
            background: white;
            padding: 15px;
            border-top: 1px solid var(--light-gray);
            position: sticky;
            bottom: 0;
            z-index: 100;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            .container {
                border-radius: 0;
            }
            
            .app-header {
                padding: 15px;
            }
            
            .content {
                padding: 12px;
            }
            
            .card {
                padding: 15px;
            }
            
            .fee-row {
                flex-direction: column;
                gap: 8px;
            }
            
            .input-group {
                flex-direction: column;
                gap: 8px;
            }
        }
        
        /* è§¦æ‘¸ä¼˜åŒ– */
        .touch-feedback {
            transition: transform 0.1s;
        }
        
        .touch-feedback:active {
            transform: scale(0.98);
        }
        
        /* æ»šåŠ¨æ¡ä¼˜åŒ– */
        ::-webkit-scrollbar {
            width: 4px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 2px;
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }
        
        .status-online {
            background: var(--success);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* å¿«æ·æŒ‰é’® */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .quick-btn {
            flex: 1;
            padding: 10px;
            background: var(--light);
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .quick-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="app-header">
            <div class="header-content">
                <div>
                    <div class="app-title">
                        <i class="fas fa-chart-line"></i>
                        <span>BursaæŠ•èµ„è®¡ç®—å™¨</span>
                        <span class="status-indicator status-online"></span>
                    </div>
                    <div class="app-subtitle">AIé€‰è‚¡ + è´¹ç”¨è®¡ç®— | ç¡®ä¿RM5å‡€å›é…¬</div>
                </div>
                <div style="font-size: 12px; opacity: 0.9;">
                    <div>æ›´æ–°: <span id="dataUpdateDate">2025-12-12</span></div>
                    <div>ç›®æ ‡: RM5 åˆ©æ¶¦</div>
                </div>
            </div>
        </div>
        
        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
        <div class="tab-bar">
            <div class="tab active" onclick="switchTab('stocks')">
                <i class="fas fa-star"></i> AIé€‰è‚¡
            </div>
            <div class="tab" onclick="switchTab('calculator')">
                <i class="fas fa-calculator"></i> è®¡ç®—å™¨
            </div>
            <div class="tab" onclick="switchTab('results')">
                <i class="fas fa-chart-pie"></i> ç»“æœ
            </div>
        </div>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="content">
            <!-- AIé€‰è‚¡æ ‡ç­¾é¡µ -->
            <div id="stocks-tab" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-filter"></i> æ•°æ®ç­›é€‰
                        </div>
                    </div>
                    
                    <div class="date-picker">
                        <label for="dateSelect"><i class="far fa-calendar-alt"></i> æ—¥æœŸ:</label>
                        <select id="dateSelect">
                            <option value="2025-12-12">2025-12-12</option>
                            <option value="2025-12-11">2025-12-11</option>
                            <option value="2025-12-10">2025-12-10</option>
                        </select>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="loadAiStocksData()">
                            <i class="fas fa-sync-alt"></i> åˆ·æ–°
                        </button>
                        <button class="quick-btn" onclick="useSampleData()">
                            <i class="fas fa-database"></i> ç¤ºä¾‹
                        </button>
                        <button class="quick-btn" onclick="showHowToUse()">
                            <i class="fas fa-question-circle"></i> å¸®åŠ©
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line"></i> AIæ¨èè‚¡ç¥¨
                        </div>
                        <span id="stocksCount" style="font-size: 12px; color: var(--gray);">åŠ è½½ä¸­...</span>
                    </div>
                    
                    <div id="aiStocksList" class="stocks-list">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>æ­£åœ¨åŠ è½½AIé€‰è‚¡æ•°æ®...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è®¡ç®—å™¨æ ‡ç­¾é¡µ -->
            <div id="calculator-tab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-edit"></i> è‚¡ç¥¨ä¿¡æ¯
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="stockCode"><i class="fas fa-hashtag"></i> è‚¡ç¥¨ä»£ç </label>
                        <input type="text" id="stockCode" class="form-input" placeholder="ä¾‹å¦‚: 7214" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="stockName"><i class="fas fa-signature"></i> è‚¡ç¥¨åç§°</label>
                        <input type="text" id="stockName" class="form-input" placeholder="é€‰æ‹©è‚¡ç¥¨åè‡ªåŠ¨å¡«å……" readonly>
                    </div>
                    
                    <div class="input-group">
                        <div class="form-group">
                            <label for="buyPrice"><i class="fas fa-shopping-cart"></i> ä¹°å…¥ä»·</label>
                            <input type="number" id="buyPrice" class="form-input" step="0.001" min="0.001" placeholder="0.000">
                        </div>
                        <div class="form-group">
                            <label for="sellPrice"><i class="fas fa-money-bill-wave"></i> ç›®æ ‡ä»·</label>
                            <input type="number" id="sellPrice" class="form-input" step="0.001" min="0.001" placeholder="0.000">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="shareUnits"><i class="fas fa-chart-bar"></i> è´­ä¹°è‚¡æ•° (å•ä½: 100è‚¡)</label>
                        <input type="number" id="shareUnits" class="form-input" min="1" max="1000" value="10">
                        <small style="color: var(--gray); margin-top: 5px; display: block;">
                            æ€»è‚¡æ•°: <span id="totalSharesDisplay">1,000</span> è‚¡
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="totalInvestment"><i class="fas fa-coins"></i> æŠ•èµ„æ€»é¢ (RM)</label>
                        <input type="text" id="totalInvestment" class="form-input" readonly placeholder="è‡ªåŠ¨è®¡ç®—">
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cog"></i> è´¹ç”¨è®¾ç½®
                        </div>
                        <button id="resetFeesBtn" style="background: none; border: none; color: var(--primary); font-size: 12px; cursor: pointer;">
                            <i class="fas fa-redo"></i> é‡ç½®
                        </button>
                    </div>
                    
                    <div class="fee-settings">
                        <div class="fee-row">
                            <div class="form-group">
                                <label style="font-size: 12px;">ç»çºªä½£é‡‘ (%)</label>
                                <input type="number" id="brokerageRate" class="form-input" step="0.01" min="0" value="0.42">
                            </div>
                            <div class="form-group">
                                <label style="font-size: 12px;">æœ€ä½ä½£é‡‘ (RM)</label>
                                <input type="number" id="brokerageMin" class="form-input" step="0.01" min="0" value="8">
                            </div>
                        </div>
                        
                        <div class="fee-row">
                            <div class="form-group">
                                <label style="font-size: 12px;">æ¸…ç®—è´¹ (%)</label>
                                <input type="number" id="clearingFeeRate" class="form-input" step="0.001" min="0" value="0.03">
                            </div>
                            <div class="form-group">
                                <label style="font-size: 12px;">ä¸Šé™ (RM)</label>
                                <input type="number" id="clearingCap" class="form-input" step="1" min="0" value="200">
                            </div>
                        </div>
                        
                        <div class="fee-row">
                            <div class="form-group">
                                <label style="font-size: 12px;">å°èŠ±ç¨ (RM/1000)</label>
                                <input type="number" id="stampDuty" class="form-input" step="0.01" min="0" value="1.50">
                            </div>
                            <div class="form-group">
                                <label style="font-size: 12px;">ä¸Šé™ (RM)</label>
                                <input type="number" id="stampDutyCap" class="form-input" step="1" min="0" value="1000">
                            </div>
                        </div>
                        
                        <div class="fee-row">
                            <div class="form-group">
                                <label style="font-size: 12px;">æœåŠ¡ç¨ (%)</label>
                                <input type="number" id="serviceTaxRate" class="form-input" step="0.01" min="0" value="6.00">
                            </div>
                            <div class="form-group">
                                <label style="font-size: 12px;">ç›®æ ‡åˆ©æ¶¦ (RM)</label>
                                <input type="number" id="minProfitTarget" class="form-input" step="0.01" min="0" value="5.00">
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="calculateBtn" class="btn btn-primary touch-feedback">
                    <i class="fas fa-calculator"></i> è®¡ç®—å‡€å›é…¬
                </button>
            </div>
            
            <!-- ç»“æœæ ‡ç­¾é¡µ -->
            <div id="results-tab" class="tab-content">
                <div id="resultSection" style="display: none;">
                    <div class="result-card">
                        <div style="font-size: 14px; color: var(--gray);">å‡€å›é…¬</div>
                        <div id="resultMain" class="result-main result-positive">RM 0.00</div>
                        <div id="resultSub" class="result-sub">0.00% å›é…¬ç‡</div>
                        
                        <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                            <div style="text-align: center;">
                                <div style="font-size: 12px; color: var(--gray);">ä¿æœ¬ä»·</div>
                                <div id="breakEvenPrice" style="font-size: 16px; font-weight: 600;">RM 0.000</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 12px; color: var(--gray);">ç›®æ ‡ä»·</div>
                                <div id="targetPrice" style="font-size: 16px; font-weight: 600;">RM 0.000</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="minimumNote" class="card" style="display: none; background: #FFF3E0; border-left: 4px solid var(--warning);">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                            <div>
                                <div style="font-weight: 600; color: var(--warning);">æœªè¾¾åˆ°æœ€ä½åˆ©æ¶¦ç›®æ ‡</div>
                                <div style="font-size: 13px; color: var(--gray); margin-top: 5px;">
                                    å½“å‰å›é…¬ <strong id="currentProfitDisplay">RM 0.00</strong> ä½äºç›®æ ‡ <strong>RM <span id="minProfitDisplay">5.00</span></strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-list-alt"></i> è´¹ç”¨æ˜ç»†
                            </div>
                        </div>
                        
                        <div id="resultDetails">
                            <div class="detail-row">
                                <span>è´­ä¹°æˆæœ¬:</span>
                                <span id="buyTotalCost">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>å–å‡ºæ”¶å…¥:</span>
                                <span id="sellTotalRevenue">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>ç»çºªä½£é‡‘:</span>
                                <span id="totalBrokerage">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>æ¸…ç®—è´¹:</span>
                                <span id="totalClearingFee">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>å°èŠ±ç¨:</span>
                                <span id="totalStampDuty">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>æœåŠ¡ç¨:</span>
                                <span id="serviceTax">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>æ€»è´¹ç”¨:</span>
                                <span id="totalFees">RM 0.00</span>
                            </div>
                            <div class="detail-row">
                                <span>å‡€å›é…¬:</span>
                                <span id="netProfit" class="result-positive">RM 0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="noResults" class="loading">
                    <i class="fas fa-calculator" style="font-size: 36px; color: var(--gray);"></i>
                    <p style="margin-top: 10px;">è¯·å…ˆåœ¨è®¡ç®—å™¨é¡µé¢è¿›è¡Œè®¡ç®—</p>
                    <button onclick="switchTab('calculator')" style="margin-top: 15px; padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm);">
                        <i class="fas fa-arrow-left"></i> è¿”å›è®¡ç®—å™¨
                    </button>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="app-footer">
            <div style="text-align: center; font-size: 11px; color: var(--gray);">
                <p>Â© 2025 Bursa Malaysia AIåˆ†æå·¥å…· | æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…</p>
            </div>
        </div>
    </div>
    
    <script>
        // å…¨å±€å˜é‡
        let aiStocksData = {};
        let selectedStock = null;
        let currentDate = '2025-12-12';
        let latestPrices = {};
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“± ç§»åŠ¨ç‰ˆæŠ•èµ„è®¡ç®—å™¨å¯åŠ¨');
            
            // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
            initDateSelector();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            bindEventListeners();
            
            // åŠ è½½å½“å‰æ—¥æœŸçš„æ•°æ®
            loadAiStocksData();
            
            // åˆå§‹åŒ–è§¦æ‘¸åé¦ˆ
            initTouchFeedback();
        });
        
        // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
        function initDateSelector() {
            const dateSelect = document.getElementById('dateSelect');
            dateSelect.value = currentDate;
            
            dateSelect.addEventListener('change', function() {
                currentDate = this.value;
                console.log('é€‰æ‹©æ—¥æœŸ:', currentDate);
                loadAiStocksData();
            });
        }
        
        // åˆå§‹åŒ–è§¦æ‘¸åé¦ˆ
        function initTouchFeedback() {
            const buttons = document.querySelectorAll('button, .tab, .quick-btn, .stock-item');
            buttons.forEach(btn => {
                btn.classList.add('touch-feedback');
            });
        }
        
        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        function bindEventListeners() {
            // è®¡ç®—æŒ‰é’®
            document.getElementById('calculateBtn').addEventListener('click', calculateProfit);
            
            // é‡ç½®è´¹ç”¨æŒ‰é’®
            document.getElementById('resetFeesBtn').addEventListener('click', resetFeesToDefault);
            
            // è¾“å…¥æ¡†å˜åŒ–äº‹ä»¶
            document.getElementById('buyPrice').addEventListener('input', updateTotalInvestment);
            document.getElementById('shareUnits').addEventListener('input', updateTotalInvestment);
            
            // è´¹ç”¨è®¾ç½®å˜åŒ–æ—¶è‡ªåŠ¨è®¡ç®—
            const feeInputs = [
                'brokerageRate', 'brokerageMin', 'clearingFeeRate', 'clearingCap',
                'stampDuty', 'stampDutyCap', 'serviceTaxRate', 'minProfitTarget'
            ];
            
            feeInputs.forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    if (document.getElementById('buyPrice').value && 
                        document.getElementById('sellPrice').value) {
                        setTimeout(calculateProfit, 300);
                    }
                });
            });
        }
        
        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            // æ›´æ–°æ ‡ç­¾é¡µæ ·å¼
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾é¡µ
            const activeTab = document.querySelector(`.tab[onclick*="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            document.querySelector('.content').scrollTop = 0;
            
            // å¦‚æœåˆ‡æ¢åˆ°ç»“æœé¡µä¸”æ²¡æœ‰ç»“æœï¼Œæ˜¾ç¤ºæç¤º
            if (tabName === 'results' && !document.getElementById('resultSection').style.display || 
                document.getElementById('resultSection').style.display === 'none') {
                document.getElementById('resultSection').style.display = 'none';
                document.getElementById('noResults').style.display = 'block';
            } else if (tabName === 'results') {
                document.getElementById('resultSection').style.display = 'block';
                document.getElementById('noResults').style.display = 'none';
            }
            
            console.log('åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:', tabName);
        }
        
        // åŠ è½½AIé€‰è‚¡æ•°æ®
        async function loadAiStocksData() {
            console.log('å¼€å§‹åŠ è½½AIé€‰è‚¡æ•°æ®...');
            const stocksListEl = document.getElementById('aiStocksList');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            stocksListEl.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>æ­£åœ¨åŠ è½½AIé€‰è‚¡æ•°æ®...</p>
                </div>
            `;
            
            // æ›´æ–°æ•°æ®æ›´æ–°æ—¥æœŸæ˜¾ç¤º
            document.getElementById('dataUpdateDate').textContent = currentDate;
            
            try {
                // æ„å»ºæ–‡ä»¶å
                const filename = `scripts/data/bursa/picks/picks_${currentDate.replace(/-/g, '')}.json`;
                console.log('å°è¯•åŠ è½½æ–‡ä»¶:', filename);
                
                // å°è¯•åŠ è½½æ•°æ®
                const response = await fetch(filename);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: æ— æ³•åŠ è½½æ•°æ®`);
                }
                
                const data = await response.json();
                console.log('æ•°æ®åŠ è½½æˆåŠŸ:', data);
                
                // å¤„ç†æ•°æ®
                processStockData(data);
                
            } catch (error) {
                console.error('åŠ è½½AIé€‰è‚¡æ•°æ®å¤±è´¥:', error);
                
                // æ˜¾ç¤ºé”™è¯¯ï¼Œæä¾›ä½¿ç”¨ç¤ºä¾‹æ•°æ®çš„é€‰é¡¹
                stocksListEl.innerHTML = `
                    <div class="error">
                        <i class="fas fa-exclamation-circle"></i>
                        <div>
                            <p style="font-weight: 600; margin-bottom: 5px;">æ— æ³•åŠ è½½æ•°æ®</p>
                            <p style="font-size: 12px; margin-bottom: 10px;">${error.message}</p>
                            <button onclick="useSampleData()" style="width: 100%; padding: 10px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm); margin-top: 10px;">
                                <i class="fas fa-database"></i> ä½¿ç”¨ç¤ºä¾‹æ•°æ®
                            </button>
                        </div>
                    </div>
                `;
            }
        }
        
        // å¤„ç†è‚¡ç¥¨æ•°æ®
        function processStockData(data) {
            const stocksListEl = document.getElementById('aiStocksList');
            
            // æå–picksæ•°ç»„
            let picks = [];
            if (data.picks && Array.isArray(data.picks)) {
                picks = data.picks;
            } else if (Array.isArray(data)) {
                picks = data;
            }
            
            if (picks.length === 0) {
                stocksListEl.innerHTML = `
                    <div class="loading">
                        <i class="fas fa-database" style="color: var(--gray);"></i>
                        <p>æ²¡æœ‰æ‰¾åˆ°é€‰è‚¡æ•°æ®</p>
                        <button onclick="useSampleData()" style="margin-top: 15px; padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm);">
                            ä½¿ç”¨ç¤ºä¾‹æ•°æ®
                        </button>
                    </div>
                `;
                return;
            }
            
            // æ›´æ–°è‚¡ç¥¨è®¡æ•°
            document.getElementById('stocksCount').textContent = `${picks.length} åªè‚¡ç¥¨`;
            
            // æ˜¾ç¤ºè‚¡ç¥¨åˆ—è¡¨
            displayStocksList(picks);
        }
        
        // æ˜¾ç¤ºè‚¡ç¥¨åˆ—è¡¨
        function displayStocksList(stocks) {
            const stocksListEl = document.getElementById('aiStocksList');
            let html = '';
            
            stocks.forEach((stock, index) => {
                // é™åˆ¶æ˜¾ç¤ºæ•°é‡
                if (index >= 15) return;
                
                const cleanCode = stock.code ? stock.code.replace(/[="]/g, '') : 'N/A';
                const name = stock.name || 'æœªçŸ¥';
                const price = stock.current_price || 0;
                const change = stock.daily_change || 0;
                const score = stock.score || 0;
                const potential = stock.potential_score || 0;
                const rec = stock.recommendation || 'æ¨è';
                const type = stock.instrument_type === 'Warrant' ? 'warrant' : 'stock';
                const status = stock.status || 'ä¸­æ€§';
                
                // æ„å»ºè‚¡ç¥¨å¡ç‰‡
                html += `
                    <div class="stock-item touch-feedback" onclick="selectStock(${JSON.stringify(stock).replace(/"/g, '&quot;')})">
                        <div class="stock-rank">#${index + 1}</div>
                        
                        <div class="stock-basic">
                            <div class="stock-code">${cleanCode}</div>
                            <div class="stock-name">${name}</div>
                        </div>
                        
                        <div class="stock-tags">
                            <span class="tag buy">${rec}</span>
                            <span class="tag ${type}">${type === 'warrant' ? 'è®¤è‚¡æƒè¯' : 'æ™®é€šè‚¡'}</span>
                            <span style="font-size: 11px; color: var(--gray);">${status}</span>
                        </div>
                        
                        <div class="stock-price">
                            <div class="price">RM ${price.toFixed(3)}</div>
                            <div class="price-change ${change >= 0 ? 'positive' : 'negative'}">
                                ${change >= 0 ? '+' : ''}${change.toFixed(2)}%
                            </div>
                        </div>
                        
                        <button class="select-btn touch-feedback" onclick="event.stopPropagation(); selectStock(${JSON.stringify(stock).replace(/"/g, '&quot;')})">
                            <i class="fas fa-check-circle"></i> é€‰æ‹©æ­¤è‚¡ç¥¨
                        </button>
                    </div>
                `;
            });
            
            stocksListEl.innerHTML = html;
        }
        
        // ä½¿ç”¨ç¤ºä¾‹æ•°æ®
        function useSampleData() {
            console.log('ä½¿ç”¨ç¤ºä¾‹æ•°æ®');
            
            const sampleData = {
                picks: [
                    {
                        code: "7214",
                        name: "LII HEN INDUSTRIES",
                        instrument_type: "Stock",
                        current_price: 0.735,
                        daily_change: 2.08,
                        score: 85.5,
                        potential_score: 92.0,
                        potential_reasons: "åŸºæœ¬é¢å¼ºåŠ²ï¼ŒæŠ€æœ¯é¢æ”¯æŒä¸Šæ¶¨",
                        recommendation: "å¼ºçƒˆä¹°å…¥",
                        risk_level: "ä½",
                        rsi: 45.5,
                        volume: 452100,
                        status: "è¶…å–",
                        pe_ratio: 8.5,
                        dividend_yield: 4.2
                    },
                    {
                        code: "285265",
                        name: "CMSB-C65",
                        instrument_type: "Warrant",
                        current_price: 0.11,
                        daily_change: 37.5,
                        score: 82,
                        potential_score: 96,
                        potential_reasons: "Warrantä¸¥é‡è¶…å–ï¼Œåå¼¹æœºä¼šæå¤§",
                        recommendation: "å¼ºçƒˆä¹°å…¥ï¼ˆWarrantï¼‰",
                        risk_level: "é«˜",
                        rsi: 50.0,
                        volume: 31449,
                        status: "ä¸­æ€§",
                        pe_ratio: null,
                        dividend_yield: null
                    },
                    {
                        code: "7129",
                        name: "ASIA FILE CORPORATION",
                        instrument_type: "Stock",
                        current_price: 2.140,
                        daily_change: 0.94,
                        score: 82.0,
                        potential_score: 88.5,
                        potential_reasons: "ç¨³å®šç°é‡‘æµï¼Œè‰¯å¥½ç®¡ç†",
                        recommendation: "ä¹°å…¥",
                        risk_level: "ä½",
                        rsi: 58.0,
                        volume: 22400,
                        status: "ç¨³å®š",
                        pe_ratio: 12.3,
                        dividend_yield: 3.8
                    }
                ]
            };
            
            processStockData(sampleData);
            showNotification('å·²åŠ è½½ç¤ºä¾‹æ•°æ®', 'success');
        }
        
        // é€‰æ‹©è‚¡ç¥¨
        function selectStock(stock) {
            console.log('é€‰æ‹©è‚¡ç¥¨:', stock.code, stock.name);
            selectedStock = stock;
            
            // æ›´æ–°è¡¨å•
            const cleanCode = stock.code ? stock.code.replace(/[="]/g, '') : '';
            document.getElementById('stockCode').value = cleanCode;
            document.getElementById('stockName').value = stock.name || 'æœªçŸ¥';
            
            const price = stock.current_price || 0;
            document.getElementById('buyPrice').value = price.toFixed(3);
            
            // è®¡ç®—å»ºè®®å–å‡ºä»·æ ¼ï¼ˆ5%å¢é•¿ï¼‰
            const suggestedSellPrice = price * 1.05;
            document.getElementById('sellPrice').value = suggestedSellPrice.toFixed(3);
            
            // æ›´æ–°æŠ•èµ„æ€»é¢
            updateTotalInvestment();
            
            // åˆ‡æ¢åˆ°è®¡ç®—å™¨æ ‡ç­¾é¡µ
            switchTab('calculator');
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(`å·²é€‰æ‹© ${cleanCode} - ${stock.name}`, 'success');
        }
        
        // æ›´æ–°æŠ•èµ„æ€»é¢
        function updateTotalInvestment() {
            const buyPrice = parseFloat(document.getElementById('buyPrice').value) || 0;
            const shareUnits = parseInt(document.getElementById('shareUnits').value) || 0;
            
            // è®¡ç®—æ€»è‚¡æ•°ï¼ˆå•ä½ * 100ï¼‰
            const totalShares = shareUnits * 100;
            const totalInvestment = buyPrice * totalShares;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('totalInvestment').value = totalInvestment.toFixed(2);
            document.getElementById('totalSharesDisplay').textContent = totalShares.toLocaleString();
        }
        
        // é‡ç½®è´¹ç”¨è®¾ç½®
        function resetFeesToDefault() {
            document.getElementById('brokerageRate').value = 0.42;
            document.getElementById('brokerageMin').value = 8;
            document.getElementById('clearingFeeRate').value = 0.03;
            document.getElementById('clearingCap').value = 200;
            document.getElementById('stampDuty').value = 1.50;
            document.getElementById('stampDutyCap').value = 1000;
            document.getElementById('serviceTaxRate').value = 6.00;
            document.getElementById('minProfitTarget').value = 5.00;
            
            showNotification('è´¹ç”¨è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼', 'success');
            
            // é‡æ–°è®¡ç®—
            if (document.getElementById('buyPrice').value) {
                calculateProfit();
            }
        }
        
        // è®¡ç®—å‡€å›é…¬
        function calculateProfit() {
            console.log('å¼€å§‹è®¡ç®—å‡€å›é…¬...');
            
            // è·å–è¾“å…¥å€¼
            const buyPrice = parseFloat(document.getElementById('buyPrice').value) || 0;
            const sellPrice = parseFloat(document.getElementById('sellPrice').value) || 0;
            const shareUnits = parseInt(document.getElementById('shareUnits').value) || 0;
            
            if (buyPrice <= 0 || sellPrice <= 0 || shareUnits <= 0) {
                showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„ä»·æ ¼å’Œè‚¡æ•°', 'error');
                return;
            }
            
            // è·å–è´¹ç”¨è®¾ç½®
            const brokerageRate = parseFloat(document.getElementById('brokerageRate').value) / 100 || 0;
            const brokerageMin = parseFloat(document.getElementById('brokerageMin').value) || 0;
            const clearingFeeRate = parseFloat(document.getElementById('clearingFeeRate').value) / 100 || 0;
            const clearingCap = parseFloat(document.getElementById('clearingCap').value) || 0;
            const stampDuty = parseFloat(document.getElementById('stampDuty').value) || 0;
            const stampDutyCap = parseFloat(document.getElementById('stampDutyCap').value) || 0;
            const serviceTaxRate = parseFloat(document.getElementById('serviceTaxRate').value) / 100 || 0;
            const minProfitTarget = parseFloat(document.getElementById('minProfitTarget').value) || 5.00;
            
            // è®¡ç®—æ€»è‚¡æ•°
            const totalShares = shareUnits * 100;
            
            // è®¡ç®—ä¹°å…¥å’Œå–å‡ºæ€»é¢
            const buyTotal = buyPrice * totalShares;
            const sellTotal = sellPrice * totalShares;
            
            // è®¡ç®—ç»çºªä½£é‡‘
            const buyBrokerage = Math.max(buyTotal * brokerageRate, brokerageMin);
            const sellBrokerage = Math.max(sellTotal * brokerageRate, brokerageMin);
            const totalBrokerage = buyBrokerage + sellBrokerage;
            
            // è®¡ç®—æ¸…ç®—è´¹
            const buyClearingFee = Math.min(buyTotal * clearingFeeRate, clearingCap);
            const sellClearingFee = Math.min(sellTotal * clearingFeeRate, clearingCap);
            const totalClearingFee = buyClearingFee + sellClearingFee;
            
            // è®¡ç®—å°èŠ±ç¨
            const buyStampDuty = Math.min(Math.ceil(buyTotal / 1000) * stampDuty, stampDutyCap);
            const sellStampDuty = Math.min(Math.ceil(sellTotal / 1000) * stampDuty, stampDutyCap);
            const totalStampDuty = buyStampDuty + sellStampDuty;
            
            // è®¡ç®—æœåŠ¡ç¨
            const serviceTax = totalBrokerage * serviceTaxRate;
            
            // è®¡ç®—æ€»è´¹ç”¨
            const totalFees = totalBrokerage + totalClearingFee + totalStampDuty + serviceTax;
            
            // è®¡ç®—å‡€å›é…¬
            const netProfit = sellTotal - buyTotal - totalFees;
            const profitPercentage = buyTotal > 0 ? (netProfit / buyTotal) * 100 : 0;
            
            // è®¡ç®—ç›ˆäºå¹³è¡¡ä»·æ ¼
            const buyCostPerShare = buyTotal + buyBrokerage + buyClearingFee + buyStampDuty + (serviceTax / 2);
            const breakEvenPrice = (buyCostPerShare + sellBrokerage + sellClearingFee + sellStampDuty + (serviceTax / 2)) / totalShares;
            
            // è®¡ç®—è¾¾åˆ°ç›®æ ‡åˆ©æ¶¦çš„ä»·æ ¼
            const targetPrice = (buyCostPerShare + sellBrokerage + sellClearingFee + sellStampDuty + (serviceTax / 2) + minProfitTarget) / totalShares;
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(
                netProfit,
                profitPercentage,
                buyTotal,
                sellTotal,
                totalBrokerage,
                totalClearingFee,
                totalStampDuty,
                serviceTax,
                totalFees,
                breakEvenPrice,
                targetPrice,
                minProfitTarget
            );
            
            // åˆ‡æ¢åˆ°ç»“æœæ ‡ç­¾é¡µ
            switchTab('results');
            
            console.log('è®¡ç®—å®Œæˆï¼Œå‡€å›é…¬:', netProfit);
        }
        
        // æ˜¾ç¤ºè®¡ç®—ç»“æœ
        function displayResults(
            netProfit, profitPercentage, buyTotal, sellTotal,
            totalBrokerage, totalClearingFee, totalStampDuty,
            serviceTax, totalFees, breakEvenPrice, targetPrice, minProfitTarget
        ) {
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('noResults').style.display = 'none';
            
            // æ›´æ–°ä¸»è¦ç»“æœ
            const resultMainEl = document.getElementById('resultMain');
            const resultSubEl = document.getElementById('resultSub');
            
            if (netProfit >= 0) {
                resultMainEl.className = 'result-main result-positive';
                resultMainEl.textContent = `+ RM ${netProfit.toFixed(2)}`;
                resultSubEl.textContent = `+${profitPercentage.toFixed(2)}% å›é…¬ç‡`;
            } else {
                resultMainEl.className = 'result-main result-negative';
                resultMainEl.textContent = `- RM ${Math.abs(netProfit).toFixed(2)}`;
                resultSubEl.textContent = `${profitPercentage.toFixed(2)}% å›é…¬ç‡`;
            }
            
            // æ›´æ–°ä»·æ ¼
            document.getElementById('breakEvenPrice').textContent = `RM ${breakEvenPrice.toFixed(3)}`;
            document.getElementById('targetPrice').textContent = `RM ${targetPrice.toFixed(3)}`;
            
            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°æœ€ä½åˆ©æ¶¦ç›®æ ‡
            const minNoteEl = document.getElementById('minimumNote');
            if (netProfit < minProfitTarget) {
                document.getElementById('minProfitDisplay').textContent = minProfitTarget.toFixed(2);
                document.getElementById('currentProfitDisplay').textContent = `RM ${netProfit.toFixed(2)}`;
                minNoteEl.style.display = 'block';
            } else {
                minNoteEl.style.display = 'none';
            }
            
            // æ›´æ–°è¯¦ç»†è´¹ç”¨
            const formatCurrency = (value) => `RM ${value.toFixed(2)}`;
            
            document.getElementById('buyTotalCost').textContent = formatCurrency(buyTotal);
            document.getElementById('sellTotalRevenue').textContent = formatCurrency(sellTotal);
            document.getElementById('totalBrokerage').textContent = formatCurrency(totalBrokerage);
            document.getElementById('totalClearingFee').textContent = formatCurrency(totalClearingFee);
            document.getElementById('totalStampDuty').textContent = formatCurrency(totalStampDuty);
            document.getElementById('serviceTax').textContent = formatCurrency(serviceTax);
            document.getElementById('totalFees').textContent = formatCurrency(totalFees);
            
            const netProfitEl = document.getElementById('netProfit');
            if (netProfit >= 0) {
                netProfitEl.textContent = `+ ${formatCurrency(netProfit)}`;
                netProfitEl.className = 'result-positive';
            } else {
                netProfitEl.textContent = `- ${formatCurrency(Math.abs(netProfit))}`;
                netProfitEl.className = 'result-negative';
            }
        }
        
        // æ˜¾ç¤ºä½¿ç”¨è¯´æ˜
        function showHowToUse() {
            const message = `
                <div style="padding: 15px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">ğŸ“± ä½¿ç”¨è¯´æ˜</h3>
                    <div style="line-height: 1.6; font-size: 14px;">
                        <p><strong>1. AIé€‰è‚¡é¡µé¢</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>é€‰æ‹©æ—¥æœŸæŸ¥çœ‹ä¸åŒæ—¥æœŸçš„æ¨è</li>
                            <li>ç‚¹å‡»è‚¡ç¥¨å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…</li>
                            <li>ç‚¹å‡»"é€‰æ‹©æ­¤è‚¡ç¥¨"è‡ªåŠ¨å¡«å……è®¡ç®—å™¨</li>
                        </ul>
                        
                        <p><strong>2. è®¡ç®—å™¨é¡µé¢</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>è‡ªåŠ¨å¡«å……é€‰ä¸­çš„è‚¡ç¥¨ä¿¡æ¯</li>
                            <li>è°ƒæ•´ä¹°å…¥ä»·ã€ç›®æ ‡ä»·å’Œè‚¡æ•°</li>
                            <li>ä¿®æ”¹è´¹ç”¨è®¾ç½®ï¼ˆé»˜è®¤å·²ä¼˜åŒ–ï¼‰</li>
                            <li>ç‚¹å‡»"è®¡ç®—å‡€å›é…¬"æŸ¥çœ‹ç»“æœ</li>
                        </ul>
                        
                        <p><strong>3. ç»“æœé¡µé¢</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>æŸ¥çœ‹å‡€å›é…¬å’Œå›é…¬ç‡</li>
                            <li>äº†è§£è¯¦ç»†çš„è´¹ç”¨æ˜ç»†</li>
                            <li>æ£€æŸ¥æ˜¯å¦è¾¾åˆ°RM5åˆ©æ¶¦ç›®æ ‡</li>
                            <li>æŸ¥çœ‹ä¿æœ¬ä»·å’Œç›®æ ‡ä»·</li>
                        </ul>
                    </div>
                </div>
            `;
            
            alertWithHTML('ä½¿ç”¨è¯´æ˜', message);
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            // ç§»é™¤ç°æœ‰é€šçŸ¥
            const existingNotification = document.querySelector('.notification-toast');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // åˆ›å»ºé€šçŸ¥
            const notification = document.createElement('div');
            notification.className = 'notification-toast';
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                padding: 12px 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#F44336' : '#2196F3'};
                color: white;
                border-radius: var(--radius-sm);
                box-shadow: var(--shadow);
                z-index: 10000;
                font-weight: 500;
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 10px;
                animation: slideDown 0.3s ease;
                max-width: 90%;
                white-space: nowrap;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
            
            // æ·»åŠ CSSåŠ¨ç”»
            if (!document.querySelector('#notification-animations')) {
                const style = document.createElement('style');
                style.id = 'notification-animations';
                style.textContent = `
                    @keyframes slideDown {
                        from { top: 50px; opacity: 0; }
                        to { top: 100px; opacity: 1; }
                    }
                    @keyframes slideUp {
                        from { top: 100px; opacity: 1; }
                        to { top: 50px; opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // å¸¦HTMLçš„alert
        function alertWithHTML(title, content) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: var(--radius);
                    width: 100%;
                    max-width: 400px;
                    max-height: 80vh;
                    overflow-y: auto;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                ">
                    <div style="
                        padding: 20px;
                        border-bottom: 1px solid var(--light-gray);
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h3 style="margin: 0; color: var(--primary);">${title}</h3>
                        <button onclick="this.closest('.modal-overlay').remove()" style="
                            background: none;
                            border: none;
                            font-size: 20px;
                            color: var(--gray);
                            cursor: pointer;
                        ">Ã—</button>
                    </div>
                    ${content}
                    <div style="padding: 15px; text-align: center;">
                        <button onclick="this.closest('.modal-overlay').remove()" style="
                            padding: 10px 30px;
                            background: var(--primary);
                            color: white;
                            border: none;
                            border-radius: var(--radius-sm);
                            font-weight: 600;
                            cursor: pointer;
                        ">ç¡®å®š</button>
                    </div>
                </div>
            `;
            
            modal.className = 'modal-overlay';
            document.body.appendChild(modal);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        setTimeout(() => {
            updateTotalInvestment();
        }, 500);
    </script>
</body>
</html>